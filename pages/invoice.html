<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice - Lumea Cosmetics</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/styles.css">

    <style>
        @media print {
            .no-print {
                display: none !important;
            }

            body {
                background-color: white !important;
            }
        }
    </style>
</head>

<body>

    <!-- Navigation (No Print) -->
    <nav class="navbar navbar-expand-lg no-print">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-gem me-2"></i>Lumea Cosmetics
            </a>
        </div>
    </nav>

    <!-- Invoice Content -->
    <div class="container py-5">
        <div class="bg-white rounded-custom p-5 shadow-custom" id="invoiceContent">
            <!-- Success Message -->
            <div class="text-center mb-5 no-print">
                <i class="fas fa-check-circle" style="font-size: 4rem; color: #28A745;"></i>
                <h2 class="mt-3 text-success">Order Placed Successfully!</h2>
                <p class="text-muted">Thank you for shopping with Lumea Cosmetics</p>
            </div>

            <!-- Invoice Header -->
            <div class="row mb-5">
                <div class="col-md-6">
                    <h1 class="text-primary-custom">
                        <i class="fas fa-gem me-2"></i>Lumea Cosmetics
                    </h1>
                    <p class="mb-0">123 Beauty Avenue</p>
                    <p class="mb-0">New York, NY 10001</p>
                    <p class="mb-0">Phone: (555) 123-4567</p>
                    <p class="mb-0">Email: info@lumeacosmetics.com</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h2>INVOICE</h2>
                    <p class="mb-0"><strong>Order ID:</strong> <span id="orderId"></span></p>
                    <p class="mb-0"><strong>Date:</strong> <span id="orderDate"></span></p>
                    <p class="mb-0"><strong>Status:</strong> <span class="badge-custom badge-pending"
                            id="orderStatus"></span></p>
                </div>
            </div>

            <!-- Customer Details -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <h5 class="text-primary-custom mb-3">Bill To:</h5>
                    <p class="mb-0"><strong id="customerName"></strong></p>
                    <p class="mb-0" id="customerEmail"></p>
                    <p class="mb-0" id="shippingAddress"></p>
                </div>
                <div class="col-md-6">
                    <h5 class="text-primary-custom mb-3">Payment Method:</h5>
                    <p id="paymentMethod"></p>
                </div>
            </div>

            <!-- Order Items -->
            <div class="table-responsive mb-4">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th class="text-end">Total</th>
                        </tr>
                    </thead>
                    <tbody id="orderItems"></tbody>
                </table>
            </div>

            <!-- Order Totals -->
            <div class="row">
                <div class="col-md-6 offset-md-6">
                    <table class="table">
                        <tr>
                            <td><strong>Subtotal:</strong></td>
                            <td class="text-end" id="subtotal"></td>
                        </tr>
                        <tr>
                            <td><strong>Tax (10%):</strong></td>
                            <td class="text-end" id="tax"></td>
                        </tr>
                        <tr>
                            <td><strong>Shipping:</strong></td>
                            <td class="text-end" id="shipping"></td>
                        </tr>
                        <tr class="table-active">
                            <td><strong>Total:</strong></td>
                            <td class="text-end"><strong class="text-primary-custom fs-5" id="total"></strong></td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Footer Note -->
            <div class="mt-5 p-4 bg-light-pink rounded-custom">
                <p class="mb-2"><strong>Thank you for your purchase!</strong></p>
                <p class="mb-0 small">If you have any questions about this invoice, please contact us at
                    support@lumeacosmetics.com</p>
            </div>

            <!-- Action Buttons (No Print) -->
            <div class="text-center mt-4 no-print">
                <button class="btn btn-primary-custom btn-lg me-3" onclick="window.print()">
                    <i class="fas fa-print me-2"></i>Print Invoice
                </button>
                <a href="../index.html" class="btn btn-secondary-custom btn-lg">
                    <i class="fas fa-home me-2"></i>Back to Home
                </a>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="../js/main.js"></script>

    <script>
        // Display invoice on page load
        document.addEventListener('DOMContentLoaded', () => {
            const order = LumeaUtils.Storage.get('currentOrder');

            if (!order) {
                LumeaUtils.Toast.show('No order found', 'error');
                setTimeout(() => {
                    window.location.href = '../index.html';
                }, 1500);
                return;
            }

            // Populate invoice
            document.getElementById('orderId').textContent = '#' + order.id.substr(0, 8).toUpperCase();
            document.getElementById('orderDate').textContent = new Date(order.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('orderStatus').textContent = order.status;
            document.getElementById('customerName').textContent = order.customerName;
            document.getElementById('customerEmail').textContent = order.customerEmail;
            document.getElementById('shippingAddress').textContent = order.shippingAddress;
            document.getElementById('paymentMethod').textContent = order.paymentMethod;

            // Populate order items
            const orderItemsHtml = order.items.map(item => `
        <tr>
          <td>${item.product.name}</td>
          <td>${LumeaUtils.formatCurrency(item.product.price)}</td>
          <td>${item.quantity}</td>
          <td class="text-end">${LumeaUtils.formatCurrency(item.product.price * item.quantity)}</td>
        </tr>
      `).join('');
            document.getElementById('orderItems').innerHTML = orderItemsHtml;

            // Populate totals
            document.getElementById('subtotal').textContent = LumeaUtils.formatCurrency(order.subtotal);
            document.getElementById('tax').textContent = LumeaUtils.formatCurrency(order.tax);
            document.getElementById('shipping').textContent = order.shipping === 0 ? 'FREE' : LumeaUtils.formatCurrency(order.shipping);
            document.getElementById('total').textContent = LumeaUtils.formatCurrency(order.total);
        });
    </script>
</body>

</html>